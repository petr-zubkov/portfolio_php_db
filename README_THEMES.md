# Система тем для портфолио

## Обзор

Эта система тем позволяет управлять дизайном сайта-портфолио через админ-панель с использованием CSS. Система включает три готовые темы:

1. **Космос** - космическая тема с глубокими синими и фиолетовыми оттенками
2. **Вода** - водная тема с голубыми и бирюзовыми оттенками  
3. **Лес** - лесная тема с зелеными и природными оттенками

## Функциональность

### Основные возможности:

- **Управление темами через админ-панель**: Добавление, редактирование, удаление тем
- **Предпросмотр тем**: Возможность предварительного просмотра темы перед активацией
- **Настройка цветов**: Полная настройка цветовой палитры для каждой темы
- **Выбор шрифтов**: Поддержка различных Google Fonts шрифтов
- **Синхронизация настроек**: Интеграция с существующей системой настроек сайта
- **Динамическая загрузка CSS**: Автоматическая загрузка CSS файлов тем

### Структура файлов:

```
/
├── admin/
│   ├── manage_themes.php          # Управление темами
│   ├── sync_theme_settings.php    # Синхронизация настроек
│   └── activate_theme.php         # Активация темы
├── assets/
│   └── css/
│       ├── themes/
│       │   ├── space.css           # Тема Космос
│       │   ├── water.css           # Тема Вода
│       │   └── forest.css          # Тема Лес
│       ├── style.css              # Основные стили
│       └── admin.css              # Стили админ-панели
├── config.php                     # Конфигурация
├── index.php                      # Главная страница
├── preview_theme.php              # Предпросмотр темы
└── create_themes_table.sql        # SQL для создания таблицы
```

## Установка

### 1. Создание таблицы в базе данных

Выполните SQL запрос из файла `create_themes_table.sql`:

```sql
CREATE TABLE IF NOT EXISTS `themes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `slug` varchar(50) NOT NULL,
  `description` text NOT NULL,
  `primary_color` varchar(7) NOT NULL,
  `secondary_color` varchar(7) NOT NULL,
  `accent_color` varchar(7) NOT NULL,
  `text_color` varchar(7) NOT NULL,
  `bg_color` varchar(7) NOT NULL,
  `font_family` varchar(50) NOT NULL,
  `bg_image` varchar(255) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 2. Вставка начальных данных

```sql
INSERT INTO `themes` (`id`, `name`, `slug`, `description`, `primary_color`, `secondary_color`, `accent_color`, `text_color`, `bg_color`, `font_family`, `bg_image`, `is_active`) VALUES
(1, 'Космос', 'space', 'Космическая тема с глубокими синими и фиолетовыми оттенками', '#0f0c29', '#302b63', '#24243e', '#e0e0e0', '#1a1a2e', 'Orbitron', '', 1),
(2, 'Вода', 'water', 'Водная тема с голубыми и бирюзовыми оттенками', '#006ba6', '#0496ff', '#3da9fc', '#333333', '#f0f8ff', 'Montserrat', '', 0),
(3, 'Лес', 'forest', 'Лесная тема с зелеными и природными оттенками', '#1e3a1e', '#2d5a2d', '#4a7c59', '#333333', '#f5f5dc', 'Roboto', '', 0);
```

### 3. Настройка файлов

Убедитесь, что все файлы скопированы в соответствующие директории:

- CSS файлы тем в `assets/css/themes/`
- PHP файлы админ-панели в `admin/`
- Основные файлы в корневую директорию

## Использование

### 1. Доступ к админ-панели

Перейдите по адресу `http://ваш-сайт/admin/` и войдите в систему:
- Логин: `admin`
- Пароль: `admin123`

### 2. Управление темами

В админ-панели выберите "Управление темами":

#### Добавление новой темы:
1. Нажмите "Добавить новую тему"
2. Заполните форму:
   - Название темы
   - URL идентификатор (slug)
   - Описание
   - Выберите шрифт
   - Настройте цвета (основной, вторичный, акцентный, текста, фона)
3. Нажмите "Добавить тему"

#### Редактирование темы:
1. Нажмите кнопку "Редактировать" на карточке темы
2. Внесите изменения в модальном окне
3. Нажмите "Сохранить изменения"

#### Активация темы:
1. Нажмите кнопку "Активировать" на карточке темы
2. Тема будет немедленно применена к сайту

#### Предпросмотр темы:
1. Нажмите кнопку "Предпросмотр" (иконка глаза)
2. Откроется новая вкладка с предпросмотром темы
3. В предпросмотре можно активировать тему или вернуться к управлению

### 3. Синхронизация настроек

Для синхронизации настроек активной темы с общими настройками сайта:

1. В блоке "Текущая активная тема" нажмите "Синхронизировать настройки"
2. Настройки цветов, шрифтов и другие параметры будут скопированы в таблицу settings

## Описание тем

### Тема "Космос"

- **Цвета**: Глубокие синие (#0f0c29), фиолетовые (#302b63), темные (#24243e)
- **Шрифт**: Orbitron (технологичный, геометрический)
- **Особенности**: 
  - Анимированный звездный фон
  - Свечение элементов
  - Космическая атмосфера
  - Подходит для технических портфолио

### Тема "Вода"

- **Цвета**: Морской синий (#006ba6), голубой (#0496ff), светло-голубой (#3da9fc)
- **Шрифт**: Montserrat (современный, чистый)
- **Особенности**:
  - Волновые анимации
  - Плавные переходы
  - Свежий, чистый дизайн
  - Подходит для креативных портфолио

### Тема "Лес"

- **Цвета**: Темно-зеленый (#1e3a1e), зеленый (#2d5a2d), оливковый (#4a7c59)
- **Шрифт**: Roboto (классический, читабельный)
- **Особенности**:
  - Анимация падающих листьев
  - Природная цветовая палитра
  - Уютная, экологичная атмосфера
  - Подходит для экологических и природных проектов

## Кастомизация

### Создание новой темы

1. Скопируйте существующую тему как основу
2. Измените CSS файл в `assets/css/themes/`
3. Добавьте тему через админ-панель
4. Настройте цвета и шрифты

### Изменение существующей темы

1. Откройте соответствующий CSS файл
2. Измените стили по необходимости
3. Обновите тему через админ-панель

### Добавление новых шрифтов

1. Выберите шрифт на Google Fonts
2. Добавьте его в список доступных шрифтов в админ-панели
3. Обновите тему с новым шрифтом

## Технические детали

### Структура таблицы themes

```sql
CREATE TABLE `themes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,           -- Название темы
  `slug` varchar(50) NOT NULL,           -- URL идентификатор
  `description` text NOT NULL,          -- Описание темы
  `primary_color` varchar(7) NOT NULL,   -- Основной цвет
  `secondary_color` varchar(7) NOT NULL, -- Вторичный цвет
  `accent_color` varchar(7) NOT NULL,   -- Акцентный цвет
  `text_color` varchar(7) NOT NULL,     -- Цвет текста
  `bg_color` varchar(7) NOT NULL,       -- Цвет фона
  `font_family` varchar(50) NOT NULL,   -- Шрифт
  `bg_image` varchar(255) NOT NULL,     -- Фоновое изображение
  `is_active` tinyint(1) NOT NULL DEFAULT 0, -- Активна ли тема
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`)
);
```

### Интеграция с существующей системой

Система тем интегрирована с существующей системой настроек через:

1. **Динамическую загрузку CSS**: Темы загружаются автоматически на основе активной записи
2. **Синхронизацию настроек**: Возможность копирования настроек темы в общие настройки сайта
3. **Обратную совместимость**: Сохранение работоспособности существующих настроек

### Безопасность

- Все запросы к базе данных используют подготовленные выражения
- Проверка авторизации для всех действий в админ-панели
- Валидация входных данных
- Защита от SQL-инъекций

## Устранение неполадок

### Тема не применяется

1. Проверьте, что тема активна в админ-панели
2. Убедитесь, что CSS файл темы существует в `assets/css/themes/`
3. Проверьте права доступа к файлам
4. Очистите кэш браузера

### Цвета не отображаются правильно

1. Проверьте формат цветов (должен быть #RRGGBB)
2. Убедитесь, что CSS переменные правильно определены
3. Проверьте синтаксис CSS файла темы

### Шрифт не загружается

1. Проверьте правильность названия шрифта
2. Убедитесь, что шрифт доступен на Google Fonts
3. Проверьте подключение шрифта в HTML

## Поддержка

При возникновении проблем:

1. Проверьте журналы ошибок сервера
2. Убедитесь, что все файлы на месте
3. Проверьте настройки базы данных
4. Сверьте структуру таблиц с предоставленной

## Лицензия

Эта система тем является частью проекта портфолио и может использоваться в соответствии с лицензией основного проекта.